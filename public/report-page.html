<!DOCTYPE html>
  <html lang="en" dir="ltr">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="icon" href="pictures/Icon.png">
      <link rel="stylesheet" href="css/main_stylesheet.css">
      <meta name="description" content="Official Site of FRC Team 1806: S.W.A.T.">
      <meta name="keywords" content="robotics,first robotics,first robotics competition,frc,robot,robots,smithville,kansas city,missouri,smithville high school,smithville school district,smithville warriors,advancing technology,smithville warriors advancing technology,swat,s.w.a.t.,1806,frc 1806,7359,ftc team 7359,7507,ftc team 7507,sponsor,sponsorship opportunity,labconco,community america,community america credit union,cacu,wesco,SHOWTURTLE">
      <title>S.W.A.T. 1806 | Student Reports</title>
      <script src="src/jquery.min.js"></script>
    </head>
    <style>
      table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        margin: auto;
        width: 80%;
      }

      td, th {
        border: 2px solid #dddddd;
        text-align: left;
        padding: 8px;
      }

      tr:nth-child(even) {
        background-color: #dddddd;
      }
    </style>
    <body>
      <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
      <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-app.js"></script>

      <!-- Add Firebase products that you want to use -->
      <script SameSite="strict" src="https://www.gstatic.com/firebasejs/7.6.1/firebase-auth.js"></script>
      <script SameSite="strict" src="https://www.gstatic.com/firebasejs/7.6.1/firebase-database.js"></script>


      <div class="fixedbar">
        <span class="pancakes" style="font-size:30px;cursor:pointer;color:white;padding-left:15px;margin-top:2px;float:left;" onclick="openNav()">☰</span>
        <a href="home.html" class="navbarthings"><img src="pictures/Logo.png" class="logo"></a>
        <a href="login.html" class="login_pic-nav" id="login_pic-nav"><img src="pictures/login-512.png" height="30px" width="30px"></a>
        <input class="navbar-user" type="image" src="pictures/account-logout-512.png" height="30px" width="30px" id="btnLogOut" />
        <a href="user_details.html" class="navbar-user" id="navbar-user"><img src="pictures/user-3-512.png" height="30px" width="30px"></a>
        <a class="login-nav" id="login-nav" href="login.html">Login</a>
      </div>

        <div id="mySidenav" class="sidenav">
          <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
          <a href="home.html">Home</a>
          <a href="about.html" style="overflow:hidden;white-space: nowrap;">About Us</a>
          <a href="media.html">Media</a>
          <a href="sponsors.html">Sponsors</a>
          <a href="robots.html">Robots</a>
          <a href="scouting.html">Scouting</a>
          <a href="newsletters.html">Newsletters</a>
        </div>
        <br>
        <br>
        <br>
        <a href="manager-page.html" style="margin-left:150px;font-size:20px;">← Back</a>
        <br>
        <br>
        <br>
        <table id="results">
          <tr>
            <th>Student Name</th>
            <th>Total Time</th>
            <th>Clocked Value</th>
          </tr>
        </table>

        <br/>
        <br/>
        <br/>
        <footer>
          <p>Smithville High School Robotics | S.W.A.T. (Smithville Warriors Advancing Technology)</p>
        </footer>

      </body>
      <script src="src/firebase_config.js"></script>
      <script id='script'>
        var query = firebase.database().ref("users").orderByKey();
        query.on("value", function(snapshot) {
          snapshot.forEach(function(childSnapshot) {
            if(childSnapshot.val().userType == "0")
              return;
            var uid = childSnapshot.key;
            var query2 = firebase.database().ref("times").child(uid);
            query2.once("value").then(function(snapshot) {
              function calc(n){
                var num = n;
                var days = (num / 1440);
                var rdays = Math.floor(days);
                var hours = (days - rdays) * 24;
                var rhours = Math.floor(hours);
                var minutes = (hours - rhours) * 60;
                var rminutes = Math.round(minutes);
                return time = rdays + "d " + rhours + "h " + rminutes + "m";
              }
              $('#results').append('<tr><td>'+childSnapshot.val().name+'</td><td>'+ calc(snapshot.val().totalTime) +'</td><td>'+childSnapshot.val().clocked+'</td></tr>');
            });
          });
        }, function(error) {
          console.error(error);
        });
      </script>

      <script>
        function openNav() {
          document.getElementById("mySidenav").style.width = "250px";
        }

        function closeNav() {
          document.getElementById("mySidenav").style.width = "0";
        }
      </script>
      <script src="src/admin-comps_manage.js"></script>
      <script src="src/auth_check.js"></script>
    </html>
